"use strict";

Object.defineProperty(exports, "__esModule", {
    value: true
});

var _getIterator2 = require("babel-runtime/core-js/get-iterator");

var _getIterator3 = _interopRequireDefault(_getIterator2);

var _promise = require("babel-runtime/core-js/promise");

var _promise2 = _interopRequireDefault(_promise);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

exports.default = function (coll, reducer, initialValue) {
    return new _promise2.default(function (resolve, reject) {
        var i = 0;

        var iterator = (0, _getIterator3.default)(coll),
            next = function next(total) {
            var item = iterator.next();

            if (item.done) {
                resolve(total);
                return;
            }

            _promise2.default.all([total, item.value]).then(function (value) {
                next(reducer(value[0], value[1], i));
                i += 1;
            }).catch(reject);
        };

        next(initialValue);
    });
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL2pzL3JlZHVjZS5qcyJdLCJuYW1lcyI6WyJjb2xsIiwicmVkdWNlciIsImluaXRpYWxWYWx1ZSIsInJlc29sdmUiLCJyZWplY3QiLCJpIiwiaXRlcmF0b3IiLCJuZXh0IiwiaXRlbSIsImRvbmUiLCJ0b3RhbCIsImFsbCIsInZhbHVlIiwidGhlbiIsImNhdGNoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O2tCQUFlLFVBQUNBLElBQUQsRUFBT0MsT0FBUCxFQUFnQkMsWUFBaEI7QUFBQSxXQUFpQyxzQkFBWSxVQUFDQyxPQUFELEVBQVVDLE1BQVYsRUFBcUI7QUFDN0UsWUFBSUMsSUFBSSxDQUFSOztBQUVBLFlBQU1DLHNDQUFXTixJQUFYLENBQU47QUFBQSxZQUNJTyxPQUFPLFNBQVBBLElBQU8sUUFBUztBQUNaLGdCQUFNQyxPQUFPRixTQUFTQyxJQUFULEVBQWI7O0FBRUEsZ0JBQUlDLEtBQUtDLElBQVQsRUFBZTtBQUNYTix3QkFBUU8sS0FBUjtBQUNBO0FBQ0g7O0FBRUQsOEJBQVFDLEdBQVIsQ0FBWSxDQUNSRCxLQURRLEVBRVJGLEtBQUtJLEtBRkcsQ0FBWixFQUdHQyxJQUhILENBR1EsaUJBQVM7QUFDYk4scUJBQUtOLFFBQVFXLE1BQU0sQ0FBTixDQUFSLEVBQWtCQSxNQUFNLENBQU4sQ0FBbEIsRUFBNEJQLENBQTVCLENBQUw7QUFDQUEscUJBQUssQ0FBTDtBQUNILGFBTkQsRUFNR1MsS0FOSCxDQU1TVixNQU5UO0FBT0gsU0FoQkw7O0FBa0JBRyxhQUFLTCxZQUFMO0FBQ0gsS0F0QitDLENBQWpDO0FBQUEsQyIsImZpbGUiOiJyZWR1Y2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCAoY29sbCwgcmVkdWNlciwgaW5pdGlhbFZhbHVlKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgbGV0IGkgPSAwO1xuXG4gICAgY29uc3QgaXRlcmF0b3IgPSBjb2xsW1N5bWJvbC5pdGVyYXRvcl0oKSxcbiAgICAgICAgbmV4dCA9IHRvdGFsID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGl0ZW0gPSBpdGVyYXRvci5uZXh0KCk7XG5cbiAgICAgICAgICAgIGlmIChpdGVtLmRvbmUpIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRvdGFsKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgICAgICB0b3RhbCxcbiAgICAgICAgICAgICAgICBpdGVtLnZhbHVlXG4gICAgICAgICAgICBdKS50aGVuKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICBuZXh0KHJlZHVjZXIodmFsdWVbMF0sIHZhbHVlWzFdLCBpKSk7XG4gICAgICAgICAgICAgICAgaSArPSAxO1xuICAgICAgICAgICAgfSkuY2F0Y2gocmVqZWN0KTtcbiAgICAgICAgfTtcblxuICAgIG5leHQoaW5pdGlhbFZhbHVlKTtcbn0pO1xuIl19